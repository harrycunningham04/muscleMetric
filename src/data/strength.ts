// Age groups definitions
export const ageGroups = [
  { range: "15-19", min: 15, max: 19 },
  { range: "20-24", min: 20, max: 24 },
  { range: "25-29", min: 25, max: 29 },
  { range: "30-34", min: 30, max: 34 },
  { range: "35-39", min: 35, max: 39 },
  { range: "40-44", min: 40, max: 44 },
  { range: "45-49", min: 45, max: 49 },
  { range: "50-54", min: 50, max: 54 },
  { range: "55-59", min: 55, max: 59 },
  { range: "60-64", min: 60, max: 64 },
  { range: "65-69", min: 65, max: 69 },
  { range: "70-74", min: 70, max: 74 },
  { range: "75-79", min: 75, max: 79 },
  { range: "80-84", min: 80, max: 84 },
  { range: "85-89", min: 85, max: 89 },
  { range: "90+", min: 90, max: 120 },
];

// Male Bench Press Standards by Age in kg
export const maleBenchPressStandards = {
  "15-19": {
    beginner: 40,
    novice: 59,
    intermediate: 84,
    advanced: 112,
    elite: 144,
  },
  "20-24": {
    beginner: 46,
    novice: 68,
    intermediate: 96,
    advanced: 129,
    elite: 164,
  },
  "25-29": {
    beginner: 47,
    novice: 70,
    intermediate: 98,
    advanced: 132,
    elite: 169,
  },
  "30-34": {
    beginner: 47,
    novice: 70,
    intermediate: 98,
    advanced: 132,
    elite: 169,
  },
  "35-39": {
    beginner: 47,
    novice: 70,
    intermediate: 98,
    advanced: 132,
    elite: 169,
  },
  "40-44": {
    beginner: 47,
    novice: 70,
    intermediate: 98,
    advanced: 132,
    elite: 169,
  },
  "45-49": {
    beginner: 44,
    novice: 66,
    intermediate: 93,
    advanced: 125,
    elite: 160,
  },
  "50-54": {
    beginner: 42,
    novice: 62,
    intermediate: 88,
    advanced: 118,
    elite: 150,
  },
  "55-59": {
    beginner: 39,
    novice: 57,
    intermediate: 81,
    advanced: 109,
    elite: 139,
  },
  "60-64": {
    beginner: 35,
    novice: 52,
    intermediate: 74,
    advanced: 99,
    elite: 127,
  },
  "65-69": {
    beginner: 32,
    novice: 47,
    intermediate: 67,
    advanced: 90,
    elite: 115,
  },
  "70-74": {
    beginner: 29,
    novice: 42,
    intermediate: 60,
    advanced: 80,
    elite: 103,
  },
  "75-79": {
    beginner: 26,
    novice: 38,
    intermediate: 54,
    advanced: 72,
    elite: 92,
  },
  "80-84": {
    beginner: 23,
    novice: 34,
    intermediate: 48,
    advanced: 64,
    elite: 82,
  },
  "85-89": {
    beginner: 20,
    novice: 30,
    intermediate: 43,
    advanced: 58,
    elite: 74,
  },
  "90+": {
    beginner: 18,
    novice: 27,
    intermediate: 39,
    advanced: 52,
    elite: 66,
  },
};

// Female Bench Press Standards by Age in kg
export const femaleBenchPressStandards = {
  "15-19": {
    beginner: 15,
    novice: 27,
    intermediate: 43,
    advanced: 63,
    elite: 86,
  },
  "20-24": {
    beginner: 17,
    novice: 31,
    intermediate: 49,
    advanced: 72,
    elite: 98,
  },
  "25-29": {
    beginner: 17,
    novice: 31,
    intermediate: 51,
    advanced: 74,
    elite: 101,
  },
  "30-34": {
    beginner: 17,
    novice: 31,
    intermediate: 51,
    advanced: 74,
    elite: 101,
  },
  "35-39": {
    beginner: 17,
    novice: 31,
    intermediate: 51,
    advanced: 74,
    elite: 101,
  },
  "40-44": {
    beginner: 17,
    novice: 31,
    intermediate: 51,
    advanced: 74,
    elite: 101,
  },
  "45-49": {
    beginner: 16,
    novice: 30,
    intermediate: 48,
    advanced: 70,
    elite: 96,
  },
  "50-54": {
    beginner: 15,
    novice: 28,
    intermediate: 45,
    advanced: 66,
    elite: 90,
  },
  "55-59": {
    beginner: 14,
    novice: 26,
    intermediate: 42,
    advanced: 61,
    elite: 83,
  },
  "60-64": {
    beginner: 13,
    novice: 24,
    intermediate: 38,
    advanced: 56,
    elite: 76,
  },
  "65-69": {
    beginner: 12,
    novice: 21,
    intermediate: 34,
    advanced: 50,
    elite: 69,
  },
  "70-74": {
    beginner: 11,
    novice: 19,
    intermediate: 31,
    advanced: 45,
    elite: 62,
  },
  "75-79": {
    beginner: 9,
    novice: 17,
    intermediate: 28,
    advanced: 40,
    elite: 55,
  },
  "80-84": {
    beginner: 8,
    novice: 15,
    intermediate: 25,
    advanced: 36,
    elite: 49,
  },
  "85-89": {
    beginner: 8,
    novice: 14,
    intermediate: 22,
    advanced: 32,
    elite: 44,
  },
  "90+": { beginner: 7, novice: 12, intermediate: 20, advanced: 29, elite: 40 },
};

// Male Squat Standards by Age in kg
export const maleSquatStandards = {
  "15-19": {
    beginner: 55,
    novice: 80,
    intermediate: 111,
    advanced: 147,
    elite: 187,
  },
  "20-24": {
    beginner: 62,
    novice: 91,
    intermediate: 127,
    advanced: 168,
    elite: 214,
  },
  "25-29": {
    beginner: 64,
    novice: 93,
    intermediate: 130,
    advanced: 173,
    elite: 219,
  },
  "30-34": {
    beginner: 64,
    novice: 93,
    intermediate: 130,
    advanced: 173,
    elite: 219,
  },
  "35-39": {
    beginner: 64,
    novice: 93,
    intermediate: 130,
    advanced: 173,
    elite: 219,
  },
  "40-44": {
    beginner: 64,
    novice: 93,
    intermediate: 130,
    advanced: 173,
    elite: 219,
  },
  "45-49": {
    beginner: 61,
    novice: 89,
    intermediate: 123,
    advanced: 164,
    elite: 208,
  },
  "50-54": {
    beginner: 57,
    novice: 83,
    intermediate: 116,
    advanced: 154,
    elite: 195,
  },
  "55-59": {
    beginner: 53,
    novice: 77,
    intermediate: 107,
    advanced: 142,
    elite: 180,
  },
  "60-64": {
    beginner: 48,
    novice: 70,
    intermediate: 98,
    advanced: 130,
    elite: 165,
  },
  "65-69": {
    beginner: 44,
    novice: 63,
    intermediate: 88,
    advanced: 117,
    elite: 149,
  },
  "70-74": {
    beginner: 39,
    novice: 57,
    intermediate: 79,
    advanced: 105,
    elite: 134,
  },
  "75-79": {
    beginner: 35,
    novice: 51,
    intermediate: 71,
    advanced: 94,
    elite: 119,
  },
  "80-84": {
    beginner: 31,
    novice: 46,
    intermediate: 63,
    advanced: 84,
    elite: 107,
  },
  "85-89": {
    beginner: 28,
    novice: 41,
    intermediate: 57,
    advanced: 75,
    elite: 96,
  },
  "90+": {
    beginner: 25,
    novice: 37,
    intermediate: 51,
    advanced: 68,
    elite: 86,
  },
};

// Female Squat Standards by Age in kg
export const femaleSquatStandards = {
  "15-19": {
    beginner: 25,
    novice: 41,
    intermediate: 62,
    advanced: 88,
    elite: 116,
  },
  "20-24": {
    beginner: 29,
    novice: 47,
    intermediate: 71,
    advanced: 100,
    elite: 132,
  },
  "25-29": {
    beginner: 30,
    novice: 48,
    intermediate: 73,
    advanced: 103,
    elite: 136,
  },
  "30-34": {
    beginner: 30,
    novice: 48,
    intermediate: 73,
    advanced: 103,
    elite: 136,
  },
  "35-39": {
    beginner: 30,
    novice: 48,
    intermediate: 73,
    advanced: 103,
    elite: 136,
  },
  "40-44": {
    beginner: 30,
    novice: 48,
    intermediate: 73,
    advanced: 103,
    elite: 136,
  },
  "45-49": {
    beginner: 28,
    novice: 46,
    intermediate: 69,
    advanced: 97,
    elite: 129,
  },
  "50-54": {
    beginner: 26,
    novice: 43,
    intermediate: 65,
    advanced: 92,
    elite: 121,
  },
  "55-59": {
    beginner: 24,
    novice: 40,
    intermediate: 60,
    advanced: 85,
    elite: 112,
  },
  "60-64": {
    beginner: 22,
    novice: 36,
    intermediate: 55,
    advanced: 77,
    elite: 102,
  },
  "65-69": {
    beginner: 20,
    novice: 33,
    intermediate: 50,
    advanced: 70,
    elite: 92,
  },
  "70-74": {
    beginner: 18,
    novice: 29,
    intermediate: 44,
    advanced: 63,
    elite: 83,
  },
  "75-79": {
    beginner: 16,
    novice: 26,
    intermediate: 40,
    advanced: 56,
    elite: 74,
  },
  "80-84": {
    beginner: 14,
    novice: 24,
    intermediate: 36,
    advanced: 50,
    elite: 66,
  },
  "85-89": {
    beginner: 13,
    novice: 21,
    intermediate: 32,
    advanced: 45,
    elite: 59,
  },
  "90+": {
    beginner: 12,
    novice: 19,
    intermediate: 29,
    advanced: 40,
    elite: 54,
  },
};

// Male Deadlift Standards by Age in kg
export const maleDeadliftStandards = {
  "15-19": {
    beginner: 67,
    novice: 95,
    intermediate: 130,
    advanced: 170,
    elite: 213,
  },
  "20-24": {
    beginner: 76,
    novice: 109,
    intermediate: 148,
    advanced: 194,
    elite: 244,
  },
  "25-29": {
    beginner: 78,
    novice: 112,
    intermediate: 152,
    advanced: 200,
    elite: 250,
  },
  "30-34": {
    beginner: 78,
    novice: 112,
    intermediate: 152,
    advanced: 200,
    elite: 250,
  },
  "35-39": {
    beginner: 78,
    novice: 112,
    intermediate: 152,
    advanced: 200,
    elite: 250,
  },
  "40-44": {
    beginner: 78,
    novice: 112,
    intermediate: 152,
    advanced: 200,
    elite: 250,
  },
  "45-49": {
    beginner: 74,
    novice: 106,
    intermediate: 145,
    advanced: 189,
    elite: 238,
  },
  "50-54": {
    beginner: 70,
    novice: 99,
    intermediate: 136,
    advanced: 178,
    elite: 223,
  },
  "55-59": {
    beginner: 65,
    novice: 92,
    intermediate: 125,
    advanced: 164,
    elite: 206,
  },
  "60-64": {
    beginner: 59,
    novice: 84,
    intermediate: 115,
    advanced: 150,
    elite: 188,
  },
  "65-69": {
    beginner: 53,
    novice: 76,
    intermediate: 103,
    advanced: 135,
    elite: 170,
  },
  "70-74": {
    beginner: 48,
    novice: 68,
    intermediate: 93,
    advanced: 122,
    elite: 153,
  },
  "75-79": {
    beginner: 43,
    novice: 61,
    intermediate: 83,
    advanced: 109,
    elite: 136,
  },
  "80-84": {
    beginner: 38,
    novice: 54,
    intermediate: 74,
    advanced: 97,
    elite: 122,
  },
  "85-89": {
    beginner: 34,
    novice: 49,
    intermediate: 67,
    advanced: 87,
    elite: 109,
  },
  "90+": {
    beginner: 31,
    novice: 44,
    intermediate: 60,
    advanced: 79,
    elite: 99,
  },
};

// Female Deadlift Standards by Age in kg
export const femaleDeadliftStandards = {
  "15-19": {
    beginner: 32,
    novice: 51,
    intermediate: 74,
    advanced: 102,
    elite: 133,
  },
  "20-24": {
    beginner: 37,
    novice: 58,
    intermediate: 85,
    advanced: 117,
    elite: 153,
  },
  "25-29": {
    beginner: 38,
    novice: 60,
    intermediate: 87,
    advanced: 120,
    elite: 157,
  },
  "30-34": {
    beginner: 38,
    novice: 60,
    intermediate: 87,
    advanced: 120,
    elite: 157,
  },
  "35-39": {
    beginner: 38,
    novice: 60,
    intermediate: 87,
    advanced: 120,
    elite: 157,
  },
  "40-44": {
    beginner: 38,
    novice: 60,
    intermediate: 87,
    advanced: 120,
    elite: 157,
  },
  "45-49": {
    beginner: 36,
    novice: 57,
    intermediate: 83,
    advanced: 114,
    elite: 149,
  },
  "50-54": {
    beginner: 34,
    novice: 53,
    intermediate: 78,
    advanced: 107,
    elite: 139,
  },
  "55-59": {
    beginner: 31,
    novice: 49,
    intermediate: 72,
    advanced: 99,
    elite: 129,
  },
  "60-64": {
    beginner: 29,
    novice: 45,
    intermediate: 66,
    advanced: 90,
    elite: 118,
  },
  "65-69": {
    beginner: 26,
    novice: 41,
    intermediate: 59,
    advanced: 82,
    elite: 106,
  },
  "70-74": {
    beginner: 23,
    novice: 36,
    intermediate: 53,
    advanced: 73,
    elite: 95,
  },
  "75-79": {
    beginner: 21,
    novice: 33,
    intermediate: 48,
    advanced: 66,
    elite: 85,
  },
  "80-84": {
    beginner: 19,
    novice: 29,
    intermediate: 43,
    advanced: 59,
    elite: 76,
  },
  "85-89": {
    beginner: 17,
    novice: 26,
    intermediate: 38,
    advanced: 53,
    elite: 68,
  },
  "90+": {
    beginner: 15,
    novice: 23,
    intermediate: 34,
    advanced: 47,
    elite: 62,
  },
};

// Main exercises list
export const mainLifts = ["Bench Press", "Squat", "Deadlift"];

// Utility functions for weight conversion
export const kgToLbs = (kg: number): number =>
  parseFloat((kg * 2.20462).toFixed(1));
export const lbsToKg = (lbs: number): number =>
  parseFloat((lbs / 2.20462).toFixed(1));

// Get user's age group based on age
export const getUserAgeGroup = (age: number): string => {
  const ageGroup = ageGroups.find(
    (group) => age >= group.min && age <= group.max
  );
  return ageGroup ? ageGroup.range : "25-29"; // Default to 25-29 if no match
};

// Calculate Brzycki 1RM formula: weight × (36 / (37 - reps))
export const calculateOneRM = (weight: number, reps: number): number => {
  if (reps >= 37) return weight * 36; // Avoid division by zero or negative
  return weight * (36 / (37 - reps));
};

// Get strength standards based on exercise and gender
export const getStrengthStandards = (
  exercise: string,
  gender: "male" | "female"
) => {
  if (exercise === "Bench Press") {
    return gender === "male"
      ? maleBenchPressStandards
      : femaleBenchPressStandards;
  } else if (exercise === "Squat") {
    return gender === "male" ? maleSquatStandards : femaleSquatStandards;
  } else if (exercise === "Deadlift") {
    return gender === "male" ? maleDeadliftStandards : femaleDeadliftStandards;
  }
  return gender === "male"
    ? maleBenchPressStandards
    : femaleBenchPressStandards; // Default to bench press
};

// Standard type definition
export type StrengthStandard = {
  beginner: number;
  novice: number;
  intermediate: number;
  advanced: number;
  elite: number;
};

// Calculate strength level based on one rep max
export const calculateStrengthLevel = (
  oneRM: number,
  userAge: number,
  userGender: "male" | "female",
  exercise: string
): { level: string; percentile: number } => {
  const ageGroup = getUserAgeGroup(userAge);

  // Select standards based on gender and exercise
  const standards = getStrengthStandards(exercise, userGender);

  // Get standards for the specific age group
  const ageStandards = standards[ageGroup as keyof typeof standards];

  if (!ageStandards) {
    return { level: "Unknown", percentile: 0 };
  }

  // Determine where the user stands
  if (oneRM < ageStandards.beginner) {
    return {
      level: "Untrained",
      percentile: Math.max(0, Math.round((oneRM / ageStandards.beginner) * 10)),
    };
  } else if (oneRM < ageStandards.novice) {
    return {
      level: "Beginner",
      percentile: Math.round(
        10 +
          ((oneRM - ageStandards.beginner) /
            (ageStandards.novice - ageStandards.beginner)) *
            20
      ),
    };
  } else if (oneRM < ageStandards.intermediate) {
    return {
      level: "Novice",
      percentile: Math.round(
        30 +
          ((oneRM - ageStandards.novice) /
            (ageStandards.intermediate - ageStandards.novice)) *
            20
      ),
    };
  } else if (oneRM < ageStandards.advanced) {
    return {
      level: "Intermediate",
      percentile: Math.round(
        50 +
          ((oneRM - ageStandards.intermediate) /
            (ageStandards.advanced - ageStandards.intermediate)) *
            20
      ),
    };
  } else if (oneRM < ageStandards.elite) {
    return {
      level: "Advanced",
      percentile: Math.round(
        70 +
          ((oneRM - ageStandards.advanced) /
            (ageStandards.elite - ageStandards.advanced)) *
            20
      ),
    };
  } else {
    return {
      level: "Elite",
      percentile: Math.min(
        99,
        Math.round(
          90 + ((oneRM - ageStandards.elite) / (ageStandards.elite * 0.2)) * 9
        )
      ),
    };
  }
};
